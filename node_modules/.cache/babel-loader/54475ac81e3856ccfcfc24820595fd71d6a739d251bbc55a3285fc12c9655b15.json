{"ast":null,"code":"import{useState}from'react';import BigTitle from'../components/BigTitle';import SearchBar from'../components/SearchBar';import WeatherCardsContainer from'../components/WeatherCardsContainer';import{fetchWeatherData}from'../services/api';import{getCache}from'../utils/cache';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const cache=getCache();const currentList=cache.slice(0,3).reverse();const[weatherData,setWeatherData]=useState(currentList);const handleSearch=async(city,resetQuery)=>{try{const newWeather=await fetchWeatherData(city);//  fetchWeatherData should return a weather object\n// Check if city obtained by API already exists in the UI state\nif(!currentList.find(e=>e.city===newWeather.city)){setWeatherData(prevData=>{const updatedData=[...prevData,newWeather];if(updatedData.length>3)// Limit to 3 cards\nupdatedData.shift();resetQuery();// Clear the search input after search        \nreturn updatedData;});}else{alert(newWeather.city+' already exists in the list.');}}catch(error){console.error('Error fetching weather data:',error);alert(city+' not found. Please try another city.');// Error popup an alert popup\n}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(BigTitle,{title:\"Weather App\"}),/*#__PURE__*/_jsx(SearchBar,{onSearch:handleSearch}),/*#__PURE__*/_jsx(WeatherCardsContainer,{weatherData:weatherData})]});};export default Home;","map":{"version":3,"names":["useState","BigTitle","SearchBar","WeatherCardsContainer","fetchWeatherData","getCache","jsx","_jsx","jsxs","_jsxs","Home","cache","currentList","slice","reverse","weatherData","setWeatherData","handleSearch","city","resetQuery","newWeather","find","e","prevData","updatedData","length","shift","alert","error","console","children","title","onSearch"],"sources":["/Users/yiannis/Desktop/Weather-app-react/src/pages/Home.js"],"sourcesContent":["import { useState } from 'react';\nimport BigTitle from '../components/BigTitle';\nimport SearchBar from '../components/SearchBar';\nimport WeatherCardsContainer from '../components/WeatherCardsContainer';\nimport { fetchWeatherData } from '../services/api'; \nimport { getCache } from '../utils/cache';\n\n\nconst Home = () => {\n\n      const cache = getCache();\n      const currentList = cache.slice(0,3).reverse();\n      const [weatherData, setWeatherData] = useState(currentList);\n\n      const handleSearch = async (city, resetQuery) => {\n        try {\n          const newWeather = await fetchWeatherData(city); //  fetchWeatherData should return a weather object\n\n          // Check if city obtained by API already exists in the UI state\n          if (!currentList.find(e => e.city === newWeather.city)) {\n            setWeatherData(prevData => {\n              const updatedData = [...prevData, newWeather]; \n              if (updatedData.length > 3)  // Limit to 3 cards\n                updatedData.shift();    \n                resetQuery(); // Clear the search input after search        \n            return updatedData;\n            });\n          } else {\n            alert(newWeather.city + ' already exists in the list.');\n          }\n        } catch (error) {\n          console.error('Error fetching weather data:', error); \n          alert( city+ ' not found. Please try another city.'); // Error popup an alert popup\n        }\n      };\n    \n    return (\n      <div>\n        <BigTitle title=\"Weather App\"/>\n        <SearchBar onSearch={handleSearch}/>\n        <WeatherCardsContainer weatherData={weatherData}/>\n      </div>\n    );\n  };\n  \n  export default Home;\n  "],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAC7C,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAC/C,MAAO,CAAAC,qBAAqB,KAAM,qCAAqC,CACvE,OAASC,gBAAgB,KAAQ,iBAAiB,CAClD,OAASC,QAAQ,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAG1C,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,CAEb,KAAM,CAAAC,KAAK,CAAGN,QAAQ,CAAC,CAAC,CACxB,KAAM,CAAAO,WAAW,CAAGD,KAAK,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAC9C,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAACY,WAAW,CAAC,CAE3D,KAAM,CAAAK,YAAY,CAAG,KAAAA,CAAOC,IAAI,CAAEC,UAAU,GAAK,CAC/C,GAAI,CACF,KAAM,CAAAC,UAAU,CAAG,KAAM,CAAAhB,gBAAgB,CAACc,IAAI,CAAC,CAAE;AAEjD;AACA,GAAI,CAACN,WAAW,CAACS,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACJ,IAAI,GAAKE,UAAU,CAACF,IAAI,CAAC,CAAE,CACtDF,cAAc,CAACO,QAAQ,EAAI,CACzB,KAAM,CAAAC,WAAW,CAAG,CAAC,GAAGD,QAAQ,CAAEH,UAAU,CAAC,CAC7C,GAAII,WAAW,CAACC,MAAM,CAAG,CAAC,CAAG;AAC3BD,WAAW,CAACE,KAAK,CAAC,CAAC,CACnBP,UAAU,CAAC,CAAC,CAAE;AAClB,MAAO,CAAAK,WAAW,CAClB,CAAC,CAAC,CACJ,CAAC,IAAM,CACLG,KAAK,CAACP,UAAU,CAACF,IAAI,CAAG,8BAA8B,CAAC,CACzD,CACF,CAAE,MAAOU,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpDD,KAAK,CAAET,IAAI,CAAE,sCAAsC,CAAC,CAAE;AACxD,CACF,CAAC,CAEH,mBACET,KAAA,QAAAqB,QAAA,eACEvB,IAAA,CAACN,QAAQ,EAAC8B,KAAK,CAAC,aAAa,CAAC,CAAC,cAC/BxB,IAAA,CAACL,SAAS,EAAC8B,QAAQ,CAAEf,YAAa,CAAC,CAAC,cACpCV,IAAA,CAACJ,qBAAqB,EAACY,WAAW,CAAEA,WAAY,CAAC,CAAC,EAC/C,CAAC,CAEV,CAAC,CAED,cAAe,CAAAL,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}